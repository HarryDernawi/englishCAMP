<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إعلان مخيم اللغة الإنجليزية الفاخر</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Montserrat:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Modern & Luxurious Color Palette (Lighter Version) */
        :root {
            --primary-light-blue: #E0F2F7; /* Very light blue, almost white */
            --secondary-off-white: #FDFDFD; /* Off-white for backgrounds */
            --accent-gold: #D4AF37; /* Subtle Gold/Bronze */
            --text-dark: #334155; /* Dark grey-blue for readability */
            --header-dark-blue: #2C5F8A; /* A slightly darker blue for the navbar and section titles */
            --cta-green-light: #2ECC71; /* A slightly lighter green for CTA */
            --cta-green-dark: #27AE60; /* Darker green for CTA hover */

            --shadow-light: rgba(0, 0, 0, 0.03); /* Even softer shadow */
            --shadow-medium: rgba(0, 0, 0, 0.07); /* Even softer shadow */
            --shadow-strong: rgba(0, 0, 0, 0.12); /* Even softer shadow */
        }

        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--secondary-off-white);
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            min-height: 100vh;
            padding: 0;
            color: var(--text-dark);
            overflow-x: hidden;
        }
        h1, h2, h3, h4 {
            font-family: 'Montserrat', sans-serif;
            color: var(--header-dark-blue);
        }
        .navbar {
            background-color: var(--header-dark-blue);
            width: 100%;
            padding: 1rem 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 5px 15px var(--shadow-strong);
            position: sticky;
            top: 0;
            z-index: 100;
            border-radius: 0;
        }
        .nav-items-wrapper {
            display: flex;
            justify-content: space-around;
            align-items: center;
            width: 100%;
            max-width: 900px;
        }
        .nav-button {
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }
        .nav-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.1);
            transition: all 0.3s ease;
            transform: skewX(-20deg);
        }
        .nav-button:hover::before {
            left: 100%;
        }
        .nav-button:hover {
            background-color: rgba(255,255,255,0.1);
            transform: translateY(-2px);
            box-shadow: 0 3px 8px var(--shadow-medium);
        }
        .nav-button.active {
            background-color: var(--accent-gold);
            box-shadow: 0 2px 5px var(--shadow-strong);
            color: var(--header-dark-blue); /* Dark text on gold */
        }

        /* Hero Section */
        .hero-section {
            width: 100%;
            min-height: 70vh;
            background-image: url('https://placehold.co/1920x1080/E0F2F7/334155?text=Premium+Learning+Experience'); /* Lighter Placeholder */
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            padding: 4rem 2rem;
            color: var(--text-dark);
            overflow: hidden;
        }
        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(224, 242, 247, 0.7), rgba(224, 242, 247, 0.5)); /* Lighter overlay */
            z-index: 1;
        }
        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 800px;
            animation: fadeInScale 1s ease-out forwards;
        }
        .hero-content h1 {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            line-height: 1.2;
            color: var(--header-dark-blue); /* Darker text for contrast */
            text-shadow: 2px 2px 4px var(--shadow-light);
        }
        .hero-content p {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: var(--text-dark);
        }
        #campSloganText { /* Specific style for the slogan text */
            margin-top: 8rem; /* Increased top margin to push it down further */
        }
        .hero-content .camp-status {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--accent-gold);
            margin-bottom: 2rem;
            animation: pulseText 2s infinite ease-in-out;
        }
        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes pulseText {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        /* General Section Styling */
        .section-container {
            background-color: var(--secondary-off-white);
            border-radius: 1.5rem;
            box-shadow: 0 15px 30px var(--shadow-light);
            max-width: 900px;
            width: 100%;
            margin: 3rem auto;
            padding: 3rem;
            text-align: right;
            animation: fadeInUp 0.8s ease-out forwards;
            opacity: 0;
            transform: translateY(20px);
        }
        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 2.5rem;
            text-align: center;
            color: var(--header-dark-blue);
            position: relative;
        }
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            right: 50%;
            transform: translateX(50%);
            width: 80px;
            height: 4px;
            background-color: var(--accent-gold);
            border-radius: 2px;
        }

        /* Program Sections */
        .program-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }
        @media (min-width: 768px) {
            .program-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
        .program-card {
            background-color: var(--primary-light-blue); /* Lighter card background */
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 8px 15px var(--shadow-light);
            text-align: right;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .program-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 20px var(--shadow-medium);
        }
        .program-card h3 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--header-dark-blue);
        }
        .program-card ul {
            list-style: none;
            padding-right: 0;
        }
        .program-card .feature-item {
            display: flex;
            align-items: center;
            flex-direction: row-reverse; /* Changed to reverse visual order of items */
            justify-content: flex-end; /* Align text to right, icon to left in RTL */
            gap: 0.75rem;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
            color: var(--text-dark);
        }
        .program-card .feature-icon {
            color: var(--accent-gold);
            font-size: 1.8rem;
            flex-shrink: 0;
        }

        /* Methodology Section */
        .methodology-content {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--text-dark);
            text-align: center;
        }

        /* Key Info Section */
        .info-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            text-align: center;
        }
        @media (min-width: 640px) {
            .info-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
        @media (min-width: 768px) {
            .info-grid {
                grid-template-columns: 1fr 1fr 1fr 1fr;
            }
        }
        .info-item {
            background-color: var(--primary-light-blue); /* Lighter info item background */
            border-radius: 0.75rem;
            padding: 1rem;
            box-shadow: 0 4px 8px var(--shadow-light);
            font-weight: 600;
            color: var(--header-dark-blue);
            transition: transform 0.2s ease;
        }
        .info-item:hover {
            transform: translateY(-3px);
        }

        /* Our Goal Section */
        .goal-content {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--text-dark);
            text-align: center;
        }

        /* Call to Action Button */
        .cta-button {
            background-color: var(--accent-gold); /* Changed to gold */
            color: var(--header-dark-blue); /* Changed text color for visibility */
            border: 1px solid var(--header-dark-blue); /* Added border for definition */
            padding: 1.2rem 3rem;
            border-radius: 0.75rem;
            font-weight: 700;
            font-size: 1.4rem;
            display: inline-block;
            margin-top: 2rem;
            box-shadow: 0 4px 10px var(--shadow-medium); /* Adjusted shadow for lighter background */
            transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease, border-color 0.3s ease;
            text-decoration: none;
        }
        .cta-button:hover {
            background-color: var(--header-dark-blue); /* Dark blue on hover */
            color: white; /* White text on hover */
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 15px var(--shadow-strong);
            border-color: var(--header-dark-blue); /* Keep border color consistent */
        }

        /* Footer */
        .footer-info {
            background-color: var(--header-dark-blue);
            color: rgba(255, 255, 255, 0.8);
            padding: 2rem;
            margin-top: 3rem;
            width: 100%;
            text-align: center;
            font-size: 0.9rem;
            line-height: 1.6;
            border-radius: 0;
        }
        .footer-info p {
            margin-bottom: 0.5rem;
        }
        .footer-info a {
            color: var(--accent-gold);
            text-decoration: none;
            transition: color 0.2s ease;
        }
        .footer-info a:hover {
            color: white;
        }

        /* --- Slider Design --- */
        .slider-container {
            background-color: var(--secondary-off-white);
            padding: 1rem;
            border-radius: 1.5rem;
            box-shadow: 0 10px 20px var(--shadow-medium);
            position: relative;
            width: 100%;
            max-width: 700px; /* Smaller max-width for the slider */
            margin: 2rem auto;
            overflow-x: hidden; /* Changed to hidden for JS control */
            scroll-snap-type: x mandatory; /* Keep for potential fallback/styling */
            scroll-behavior: smooth; /* Keep for smooth transitions */
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        .slider-container::-webkit-scrollbar {
            display: none;
        }

        .slides {
            display: flex;
            transition: transform 0.5s ease-in-out;
            width: 100%; /* Ensure it takes full width for transform */
            height: 220px; /* Fixed height for slides container */
        }
        .slide {
            flex-shrink: 0;
            width: 100%; /* Each slide takes 100% of slides container width */
            box-sizing: border-box;
            background-color: var(--primary-light-blue); /* Changed to primary-light-blue for cards */
            color: var(--text-dark);
            font-size: 1.4rem; /* Slightly smaller font size for slides */
            font-weight: 500;
            border-radius: 1rem;
            box-shadow: 0 5px 10px var(--shadow-light);
            height: 100%; /* Take full height of slides container */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            text-align: center;
            white-space: normal;
            overflow-wrap: break-word;
            scroll-snap-align: start;
        }
        /* Responsive adjustments for slide width - these are less critical with JS transform */
        @media (max-width: 700px) {
            .slide {
                /* width: calc(100vw - 4rem); */ /* Not needed with JS transform */
            }
        }
        @media (max-width: 640px) {
            .slide {
                /* width: calc(100vw - 2rem); */ /* Not needed with JS transform */
            }
        }

        /* Slide text variations */
        .slide.style-1 { font-weight: 600; color: var(--header-dark-blue); }
        .slide.style-2 { font-style: italic; font-size: 1.5rem; }
        .slide.style-3 { /* Removed text-shadow */ }
        .slide.style-4 { font-weight: 700; }
        .slide.style-5 { font-size: 1.3rem; }
        .slide.style-6 { color: #556270; } /* A slightly different shade of dark grey */


        .slider-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0,0,0,0.02);
            color: var(--header-dark-blue);
            border: none;
            border-radius: 50%;
            padding: 0.2rem 0.15rem;
            cursor: pointer;
            z-index: 10;
            font-size: 0.8rem;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: none;
        }
        .slider-nav-btn:hover {
            background-color: rgba(0,0,0,0.05);
            color: var(--header-dark-blue);
            transform: translateY(-50%) scale(1.1);
        }
        .prev-btn {
            right: 10px;
        }
        .next-btn {
            left: 10px;
        }
        .slider-dots {
            display: flex;
            justify-content: center;
            margin-top: 1rem;
        }
        .dot {
            height: 12px;
            width: 12px;
            margin: 0 5px;
            background-color: #D1D5DB;
            border-radius: 50%;
            display: inline-block;
            transition: background-color 0.3s ease, transform 0.2s ease;
            cursor: pointer;
            border: 1px solid #9CA3AF;
        }
        .dot.active {
            background-color: var(--accent-gold); /* Active dot color is now gold */
            border-color: var(--header-dark-blue); /* Border for active dot */
            transform: scale(1.2);
        }

        /* Testimonial Section */
        .testimonial-card {
            background-color: var(--primary-light-blue);
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 8px 15px var(--shadow-light);
            text-align: center;
            margin-bottom: 2rem;
        }
        .testimonial-card p {
            font-style: italic;
            font-size: 1.1rem;
            color: var(--text-dark);
            margin-bottom: 1rem;
        }
        .testimonial-card .author {
            font-weight: 700;
            color: var(--header-dark-blue);
        }
        .testimonial-card .rating {
            color: var(--accent-gold);
            font-size: 1.2rem;
        }

        /* Scroll Reveal Animation */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Admin Button */
        .admin-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: rgba(44, 95, 138, 0.1); /* Semi-transparent header dark blue */
            color: var(--header-dark-blue);
            border: 1px solid rgba(44, 95, 138, 0.3);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: background-color 0.3s ease, transform 0.2s ease;
            z-index: 1000;
        }
        .admin-button:hover {
            background-color: rgba(44, 95, 138, 0.2);
            transform: scale(1.05);
        }

        /* Admin Modal */
        .admin-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .admin-modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .admin-modal-content {
            background-color: var(--secondary-off-white);
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            text-align: center;
            max-width: 400px;
            width: 90%;
            transform: translateY(-20px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        .admin-modal-overlay.show .admin-modal-content {
            transform: translateY(0);
            opacity: 1;
        }
        .admin-modal-content h3 {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            color: var(--header-dark-blue);
        }
        .admin-modal-content input {
            width: calc(100% - 2rem);
            padding: 0.8rem;
            margin-bottom: 1rem;
            border: 1px solid #ccc;
            border-radius: 0.5rem;
            font-size: 1rem;
            text-align: right; /* RTL support */
        }
        .admin-modal-content button {
            background-color: var(--header-dark-blue);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease;
            margin: 0 0.5rem;
        }
        .admin-modal-content button:hover {
            background-color: var(--accent-gold);
            color: var(--header-dark-blue);
        }
        .admin-modal-message {
            margin-top: 1rem;
            font-weight: 600;
            color: red;
        }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="nav-items-wrapper">
            <a href="index.html" class="nav-button active">الرئيسية</a>
            <a href="register.html" class="nav-button">التسجيل</a>
            <a href="contact.html" class="nav-button">تواصل معنا</a>
            <a href="https://www.facebook.com/AcademySchools.ly" target="_blank" class="nav-button">فيسبوك</a>
        </div>
    </div>

    <section class="hero-section">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <a href="index.html">
                <img id="schoolLogo" src="https://storage.googleapis.com/gemini-generated-images-prod/images/487167779_29373139318966172_855389515226951087_n-removebg-preview.png-eceb72d9-53f1-4e83-8187b6db22cc" alt="شعار مدارس الأكاديمية" class="school-logo" onerror="this.onerror=null;this.src='https://placehold.co/100x100/A0AEC0/FFFFFF?text=Logo';">
            </a>
            <h1 id="mainTitleText">الـ English مش لازم يكون عقدة ! 🎯</h1>
            <p id="campSloganText">تخيّل صيف يكون فيه تعلّم اللغة الإنجليزية هو الجزء الممتع من يوم طفلك!</p>
            <p class="camp-status" id="registrationStatusText">الدورة الثانية - تسجيل مفتوح الآن!</p>
            <a href="register.html" class="cta-button">سجل الآن!</a>
        </div>
    </section>

    <div class="slider-container" id="sliderContainer">
        <div class="slides" id="sliderSlides">
            </div>
        <button class="slider-nav-btn prev-btn" id="prevBtn">❮</button>
        <button class="slider-nav-btn next-btn" id="nextBtn">❯</button>
        <div class="slider-dots" id="sliderDots">
            </div>
    </div>

    <section class="section-container">
        <h2 class="section-title" id="programHeadingText">برنامج يومي متوازن ومصمّم بعناية:</h2>
        <p class="text-lg text-gray-700 mb-8 text-center" id="programIntroText">بدل ما يقضي الصيف قدام الشاشات، يجمع مخيمنا بين اللغة، الثقة، واللعب الهادف في تجربة تعليمية لا تُنسى.</p>

        <div class="program-grid">
            <div class="program-card">
                <h3 id="educationalHoursHeadingText">🧠 3 ساعات تعليمية فعّالة:</h3>
                <ul>
                    <li class="feature-item"><span>محادثة حقيقية مع مدرسين محترفين</span><span class="feature-icon">🗣️</span></li>
                    <li class="feature-item"><span>أنشطة قراءة وكتابة وفق منهج McMillion الدولي</span><span class="feature-icon">✍️</span></li>
                    <li class="feature-item"><span>ألعاب تعليمية تحفّز التفاعل وتنمّي الثقة</span><span class="feature-icon">🎲</span></li>
                </ul>
            </div>
            <div class="program-card">
                <h3 id="recreationalHoursHeadingText">🎨 1 ساعة ترفيهية يومية:</h3>
                <ul>
                    <li class="feature-item"><span>أيام سباحة مرحة</span><span class="feature-icon">🏊</span></li>
                    <li class="feature-item"><span>ورش فنية وإبداعية</span><span class="feature-icon">🖌️</span></li>
                    <li class="feature-item"><span>عروض سينما تعليمية</span><span class="feature-icon">🎬</span></li>
                    <li class="feature-item"><span>ألعاب جماعية لتعزيز روح الفريق</span><span class="feature-icon">🤝</span></li>
                </ul>
            </div>
        </div>
    </section>

    <section class="section-container">
        <h2 class="section-title" id="methodologyHeadingText">📘 المنهج المستخدم:</h2>
        <p class="methodology-content" id="methodologyDescriptionText">McMillion المعتمد عالميًا، مصمم خصيصًا للأطفال ليراعي مستوياته ويطوّر مهاراتهم الأربع:<br>(الاستماع – التحدث – القراءة – الكتابة)</p>
    </section>

    <section class="section-container">
        <h2 class="section-title">معلومات أساسية:</h2>
        <div class="info-grid">
            <div class="info-item" id="durationTextContent">🗓️ المدة: 6 أسابيع متكاملة</div>
            <div class="info-item" id="datesTextContent">📆 من 1 يونيو إلى 15 يوليو 2025</div>
            <div class="info-item" id="locationTextContent">📍 الموقع: تاجوراء – خلف منتزه السندباد</div>
            <div class="info-item" id="contactPhoneDisplay">📞 للتسجيل والاستفسار: 0929272725</div>
        </div>
    </section>

    <section class="section-container">
        <h2 class="section-title" id="ourGoalHeadingText">🚸 هدفنا:</h2>
        <p class="goal-content" id="ourGoalDescriptionText">أن نغيّر نظرة الطفل للغة الإنجليزية،<br>من "مادة دراسية" إلى "مهارة ممتعة وقوية" يعيشها يوميًا.</p>
        <p class="text-xl font-semibold text-center mt-8 text-red-600" id="limitedSeatsTextContent">📌 المقاعد محدودة لضمان الجودة... لا تتردد!</p>
    </section>

    <section class="section-container">
        <h2 class="section-title">ماذا يقول أولياء الأمور؟</h2>
        <div class="testimonial-slider">
            <div class="testimonial-card">
                <p>"تجربة رائعة! ابني أحب المخيم وتطور مستواه في الإنجليزية بشكل ملحوظ."</p>
                <div class="author">- ولي أمر طالب</div>
                <div class="rating">⭐⭐⭐⭐⭐</div>
            </div>
            <div class="testimonial-card">
                <p>"لم أكن أتوقع هذا القدر من المتعة والتعلم في نفس الوقت. شكراً لكم!"</p>
                <div class="author">- أميرة محمد</div>
                <div class="rating">⭐⭐⭐⭐</div>
            </div>
            </div>
    </section>

    <section class="section-container text-center">
        <h2 class="text-3xl font-bold text-gray-800 mb-6">لا تفوت الفرصة!</h2>
        <a href="register.html" class="cta-button">سجل الآن!</a>
    </section>

    <footer class="footer-info">
        <p id="bottomContactInfoText">للمزيد من المعلومات والتسجيل، يرجى الاتصال بنا:</p>
        <p id="bottomPhoneTextContent">الهاتف: 0929272725</p>
        <p id="hashtagsTextContent">#مخيم_الإنجليزية #صيف_2025 #EnglishForKids #طرابلس #تعليم_وترفيه #TripoliSummerCamp</p>
    </footer>

    <button class="admin-button" id="adminButton">
        <i class="fas fa-cog"></i>
    </button>

    <div class="admin-modal-overlay" id="adminModalOverlay">
        <div class="admin-modal-content">
            <h3>تسجيل الدخول للوحة التحكم</h3>
            <input type="text" id="adminUsername" placeholder="اسم المستخدم">
            <input type="password" id="adminPassword" placeholder="كلمة المرور">
            <p class="admin-modal-message" id="adminMessage"></p>
            <button id="adminLoginBtn">دخول</button>
            <button id="adminCancelBtn">إلغاء</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, doc, getDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        // Corrected: Reference __initial_auth_token directly
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null; 

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        const adminSettingsDocRef = doc(db, `artifacts/${appId}/public/data/admin_settings`, 'config');

        const defaultSettings = {
            logoUrl: 'https://storage.googleapis.com/gemini-generated-images-prod/images/487167779_29373139318966172_855389515226951087_n-removebg-preview.png-eceb72d9-53f1-4e83-8187b6db22cc', // Updated to public URL
            colors: {
                bodyBg: '#FDFDFD', /* Very light off-white */
                headerGradientStart: '#2C5F8A', /* Darker blue for header/primary elements */
                headerGradientEnd: '#4A6C8C', /* Lighter blue for header gradient end */
                featureIconColor: '#D4AF37', /* Gold accent */
                formSubmitButtonStart: '#2ECC71', /* Lighter green for CTA */
                formSubmitButtonEnd: '#27AE60' /* Darker green for CTA hover */
            },
            texts: {
                mainTitle: "الـ English مش لازم يكون عقدة ! 🎯",
                campSlogan: "تخيّل صيف يكون فيه تعلّم اللغة الإنجليزية هو الجزء الممتع من يوم طفلك!",
                registrationStatus: "الدورة الثانية - تسجيل مفتوح الآن!",
                programIntro: "بدل ما يقضي الصيف قدام الشاشات، يجمع مخيمنا بين اللغة، الثقة، واللعب الهادف في تجربة تعليمية لا تُنسى.",
                programHeading: "برنامج يومي متوازن ومصمّم بعناية:",
                educationalHoursHeading: "🧠 3 ساعات تعليمية فعّالة:",
                recreationalHoursHeading: "🎨 1 ساعة ترفيهية يومية:",
                methodologyHeading: "📘 المنهج المستخدم:",
                methodologyDescriptionText: "McMillion المعتمد عالميًا، مصمم خصيصًا للأطفال ليراعي مستوياته ويطوّر مهاراتهم الأربع:\n(الاستماع – التحدث – القراءة – الكتابة)",
                durationTextContent: "🗓️ المدة: 6 أسابيع متكاملة",
                datesTextContent: "📆 من 1 يونيو إلى 15 يوليو 2025",
                locationTextContent: "📍 الموقع: تاجوراء – خلف منتزه السندباد",
                contactPhoneDisplay: "📞 للتسجيل والاستفسار: 0929272725",
                ourGoalHeadingText: "🚸 هدفنا:",
                ourGoalDescriptionText: "أن نغيّر نظرة الطفل للغة الإنجليزية،\nمن \"مادة دراسية\" إلى \"مهارة ممتعة وقوية\" يعيشها يوميًا.",
                limitedSeatsTextContent: "📌 المقاعد محدودة لضمان الجودة... لا تتردد!",
                bottomContactInfoText: "للمزيد من المعلومات والتسجيل، يرجى الاتصال بنا:",
                bottomPhoneTextContent: "الهاتف: 0929272725",
                hashtagsTextContent: "#مخيم_الإنجليزية #صيف_2025 #EnglishForKids #طرابلس #تعليم_وترفيه #TripoliSummerCamp",
                sliderPhrases: [
                    "امنح طفلك مفتاح المستقبل: إتقان اللغة الإنجليزية يفتح له أبواباً لا حصر لها من الفرص التعليمية والمهنية.",
                    "شاهد طفلك يتحدث الإنجليزية بثقة! مخيمنا ينمي مهاراته اللغوية والشخصية في بيئة داعمة وممتعة.",
                    "لا تدع اللغة الإنجليزية تكون عائقاً أمام طموح طفلك. مخيمنا يحول التحدي إلى متعة وإتقان.",
                    "حوّل صيف طفلك إلى مغامرة تعليمية وترفيهية لا تُنسى. الإنجليزية لم تكن بهذا القدر من المرح!",
                    "اللغة الإنجليزية ليست مجرد مادة دراسية، بل هي أداة للتميز الأكاديمي والتواصل الفعال في عالمنا اليوم.",
                    "نؤمن بأن التعلم يكون أكثر فعالية عندما يكون ممتعاً. في مخيمنا، يتعلم طفلك الإنجليزية من خلال الألعاب والأنشطة التفاعلية."
                ]
            }
        };

        // Global variables for slider elements
        let currentSlideIndex = 0;
        let slideInterval;
        let sliderContainer;
        let slidesWrapper;
        let slides; // Will be updated in renderSlides
        let dots;   // Will be updated in renderSlides

        // Global variable for slider phrases and styles
        window.sliderPhrases = defaultSettings.texts.sliderPhrases;
        const slideStyles = ['style-1', 'style-2', 'style-3', 'style-4', 'style-5', 'style-6'];

        // Admin Modal elements
        const adminButton = document.getElementById('adminButton');
        const adminModalOverlay = document.getElementById('adminModalOverlay');
        const adminUsernameInput = document.getElementById('adminUsername');
        const adminPasswordInput = document.getElementById('adminPassword');
        const adminLoginBtn = document.getElementById('adminLoginBtn');
        const adminCancelBtn = document.getElementById('adminCancelBtn');
        const adminMessage = document.getElementById('adminMessage');

        // Admin credentials
        const ADMIN_USERNAME = 'harry';
        const ADMIN_PASSWORD = '0000';

        function showAdminModal() {
            if (adminModalOverlay) {
                adminModalOverlay.classList.add('show');
                if (adminUsernameInput) adminUsernameInput.value = '';
                if (adminPasswordInput) adminPasswordInput.value = '';
                if (adminMessage) adminMessage.textContent = '';
            }
        }

        function hideAdminModal() {
            if (adminModalOverlay) {
                adminModalOverlay.classList.remove('show');
            }
        }

        function handleAdminLogin() {
            const username = adminUsernameInput ? adminUsernameInput.value : '';
            const password = adminPasswordInput ? adminPasswordInput.value : '';

            if (username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
                if (adminMessage) {
                    adminMessage.textContent = 'تم تسجيل الدخول بنجاح! (هنا ستكون لوحة التحكم)';
                    adminMessage.style.color = 'green';
                }
                setTimeout(hideAdminModal, 1500);
            } else {
                if (adminMessage) {
                    adminMessage.textContent = 'اسم المستخدم أو كلمة المرور غير صحيحة.';
                    adminMessage.style.color = 'red';
                }
            }
        }

        // Add event listeners for admin modal
        if (adminButton) adminButton.addEventListener('click', showAdminModal);
        if (adminLoginBtn) adminLoginBtn.addEventListener('click', handleAdminLogin);
        if (adminCancelBtn) adminCancelBtn.addEventListener('click', hideAdminModal);
        // Close modal if clicking outside content
        if (adminModalOverlay) {
            adminModalOverlay.addEventListener('click', (e) => {
                if (e.target === adminModalOverlay) {
                    hideAdminModal();
                }
            });
        }


        function updateDots() {
            if (!dots || dots.length === 0) return;
            dots.forEach((dot, i) => {
                if (i === currentSlideIndex) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        function scrollToSlide(index) {
            // Ensure slider elements are available before attempting to scroll
            if (!slidesWrapper || !slides || slides.length === 0 || !sliderContainer) {
                console.warn("Slider elements not ready for scroll. Skipping scrollToSlide.");
                return;
            }

            if (index >= slides.length) {
                currentSlideIndex = 0;
            } else if (index < 0) {
                currentSlideIndex = slides.length - 1;
            } else {
                currentSlideIndex = index;
            }

            // Use transform for smooth sliding
            slidesWrapper.style.transform = `translateX(-${currentSlideIndex * 100}%)`;
            updateDots();
        }

        function nextSlide() {
            scrollToSlide(currentSlideIndex + 1);
        }

        function prevSlide() {
            scrollToSlide(currentSlideIndex - 1);
        }

        function startAutoSlide() {
            clearInterval(slideInterval);
            slideInterval = setInterval(nextSlide, 3000);
        }

        function stopAutoSlide() {
            clearInterval(slideInterval);
        }

        function renderSlides() {
            console.log('renderSlides called. window.sliderPhrases:', window.sliderPhrases);
            const sliderSlidesElement = document.getElementById('sliderSlides');
            const sliderDotsElement = document.getElementById('sliderDots');
            console.log('sliderSlidesElement:', sliderSlidesElement);
            console.log('sliderDotsElement:', sliderDotsElement);

            if (!sliderSlidesElement || !sliderDotsElement) {
                console.error('Slider elements not found. Cannot render slides.');
                return;
            }

            sliderSlidesElement.innerHTML = ''; // Clear existing slides
            sliderDotsElement.innerHTML = '';   // Clear existing dots

            const phrasesToRender = window.sliderPhrases && Array.isArray(window.sliderPhrases) ? window.sliderPhrases : [];

            if (phrasesToRender.length === 0) {
                const slideDiv = document.createElement('div');
                slideDiv.classList.add('slide');
                slideDiv.textContent = "لا توجد جمل لعرضها";
                sliderSlidesElement.appendChild(slideDiv);
                stopAutoSlide();
                console.log('No phrases to render, displaying default message.');
                return;
            }

            phrasesToRender.forEach((phrase, index) => {
                const slideDiv = document.createElement('div');
                slideDiv.classList.add('slide');
                slideDiv.classList.add(slideStyles[index % slideStyles.length]); // Apply rotating styles
                slideDiv.textContent = phrase; 
                sliderSlidesElement.appendChild(slideDiv);

                const dotSpan = document.createElement('span');
                dotSpan.classList.add('dot');
                dotSpan.dataset.slideIndex = index;
                dotSpan.addEventListener('click', () => {
                    scrollToSlide(index);
                    startAutoSlide(); // Restart auto-slide on manual interaction
                });
                sliderDotsElement.appendChild(dotSpan);
            });

            // Re-query slides and dots after populating content
            slides = document.querySelectorAll('.slides .slide');
            dots = document.querySelectorAll('.slider-dots .dot');

            // Add event listeners for navigation buttons, only if elements exist
            const nextBtn = document.getElementById('nextBtn');
            const prevBtn = document.getElementById('prevBtn');

            if (nextBtn) {
                nextBtn.onclick = () => { // Use onclick to easily overwrite previous listeners
                    nextSlide();
                    startAutoSlide();
                };
            }
            if (prevBtn) {
                prevBtn.onclick = () => { // Use onclick to easily overwrite previous listeners
                    prevSlide();
                    startAutoSlide();
                };
            }

            // Pause auto-slide on hover, resume on mouse leave
            if (sliderContainer) {
                sliderContainer.onmouseenter = stopAutoSlide;
                sliderContainer.onmouseleave = startAutoSlide;
            }

            // No need for onscroll listener when using translateX for primary control
            // sliderContainer.onscroll = () => { ... };

            scrollToSlide(currentSlideIndex); // Show initial slide
            startAutoSlide(); // Start slider after rendering
        }


        function applySettings(settings) {
            // Ensure settings and settings.texts are defined
            if (!settings || !settings.texts) {
                console.error("Settings or settings.texts is undefined. Cannot apply text content.");
                return; // Exit if settings are not valid
            }

            // Apply colors to CSS variables
            document.documentElement.style.setProperty('--primary-light-blue', '#E0F2F7');
            document.documentElement.style.setProperty('--secondary-off-white', '#FDFDFD');
            document.documentElement.style.setProperty('--accent-gold', settings.colors.featureIconColor);
            document.documentElement.style.setProperty('--text-dark', '#334155');
            document.documentElement.style.setProperty('--header-dark-blue', settings.colors.headerGradientStart);
            document.documentElement.style.setProperty('--cta-green-light', settings.colors.formSubmitButtonStart);
            document.documentElement.style.setProperty('--cta-green-dark', settings.colors.formSubmitButtonEnd);

            // Define elements to update and their corresponding settings values
            const elementsToUpdate = [
                { id: 'schoolLogo', prop: 'src', value: settings.logoUrl },
                { id: 'mainTitleText', prop: 'textContent', value: settings.texts.mainTitle },
                { id: 'campSloganText', prop: 'textContent', value: settings.texts.campSlogan },
                { id: 'registrationStatusText', prop: 'textContent', value: settings.texts.registrationStatus },
                { id: 'programIntroText', prop: 'textContent', value: settings.texts.programIntro },
                { id: 'programHeadingText', prop: 'textContent', value: settings.texts.programHeading },
                { id: 'educationalHoursHeadingText', prop: 'textContent', value: settings.texts.educationalHoursHeading },
                { id: 'recreationalHoursHeadingText', prop: 'textContent', value: settings.texts.recreationalHoursHeading },
                { id: 'methodologyHeadingText', prop: 'textContent', value: settings.texts.methodologyHeading },
                { id: 'methodologyDescriptionText', prop: 'textContent', value: settings.texts.methodologyDescriptionText },
                { id: 'durationTextContent', prop: 'textContent', value: settings.texts.durationTextContent },
                { id: 'datesTextContent', prop: 'textContent', value: settings.texts.datesTextContent },
                { id: 'locationTextContent', prop: 'textContent', value: settings.texts.locationTextContent },
                { id: 'contactPhoneDisplay', prop: 'textContent', value: settings.texts.contactPhoneDisplay },
                { id: 'ourGoalHeadingText', prop: 'textContent', value: settings.texts.ourGoalHeadingText },
                { id: 'ourGoalDescriptionText', prop: 'textContent', value: settings.texts.ourGoalDescriptionText },
                { id: 'limitedSeatsTextContent', prop: 'textContent', value: settings.texts.limitedSeatsTextContent },
                { id: 'bottomContactInfoText', prop: 'textContent', value: settings.texts.bottomContactInfoText },
                { id: 'bottomPhoneTextContent', prop: 'textContent', value: settings.texts.bottomPhoneTextContent },
                { id: 'hashtagsTextContent', prop: 'textContent', value: settings.texts.hashtagsTextContent }
            ];

            // Loop through elements and update them, with null checks
            elementsToUpdate.forEach(item => {
                const element = document.getElementById(item.id);
                if (element) {
                    const value = item.value !== undefined ? item.value : '';
                    if (item.prop === 'src') {
                        element.src = value;
                    } else {
                        element.textContent = value;
                    }
                } else {
                    console.warn(`Element with ID '${item.id}' not found. Cannot set ${item.prop}.`);
                }
            });

            // Update global slider phrases variable
            window.sliderPhrases = settings.texts.sliderPhrases && Array.isArray(settings.texts.sliderPhrases) ? settings.texts.sliderPhrases : defaultSettings.texts.sliderPhrases;
            
            // Re-render slides based on the updated global variable
            renderSlides();
        }

        // Fetch settings from Firestore
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                console.log("User authenticated:", user.uid);
                try {
                    const docSnap = await getDoc(adminSettingsDocRef);
                    if (docSnap.exists()) {
                        const settings = docSnap.data();
                        console.log("Admin settings loaded:", settings);
                        applySettings(settings);
                    } else {
                        console.log("No admin settings found, using default.");
                        applySettings(defaultSettings);
                    }
                } catch (error) {
                    console.error("Error fetching admin settings:", error);
                    applySettings(defaultSettings); // Fallback to default on error
                }
            } else {
                console.log("No user authenticated, signing in anonymously.");
                try {
                    await signInAnonymously(auth);
                    // onAuthStateChanged will be triggered again with the anonymous user
                } catch (error) {
                    console.error("Anonymous sign-in failed:", error);
                    applySettings(defaultSettings); // Fallback to default on error
                }
            }
        });

        // Start slider on page load with default settings (will be overwritten by Firestore if available)
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize global slider elements once DOM is ready
            sliderContainer = document.getElementById('sliderContainer');
            slidesWrapper = document.getElementById('sliderSlides');

            // Initial call to apply default settings, which will also render the slider
            applySettings(defaultSettings); 
            // Setup intersection observer for scroll reveal animations
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                        entry.target.style.transition = 'opacity 0.8s ease-out, transform 0.8s ease-out';
                        observer.unobserve(entry.target); // Stop observing once animated
                    }
                });
            }, { threshold: 0.1 }); // Trigger when 10% of the element is visible

            document.querySelectorAll('.section-container').forEach(section => {
                observer.observe(section);
            });
        });

        // Listen for messages from parent window (dashboard)
        window.addEventListener('message', (event) => {
            if (event.data && event.data.type === 'updatePreviewSettings') {
                const settings = event.data.settings;
                applySettings(settings);
            }
        });
    </script>
</body>
</html>
